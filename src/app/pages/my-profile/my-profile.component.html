<div class="fia-page">
  <mat-card class="fia-card fia-my-profile">
    <p class="fia-card-title">Benutzerdaten</p>
    <mat-card-content class="fia-view-wrapper">
      <form class="fia-user-details" [formGroup]="formGroup">
        <div class="fia-user-detail name">
          <mat-form-field class="fia-input name" appearance="legacy">
            <mat-label>Name</mat-label>
            <input matInput type="text" [formControl]="username" #nameInput="matInput" (change)="username.setValue(nameInput.value)" />
          </mat-form-field>
          <button class="fia-start-change-btn" (click)="toggleChangeName($event)"
                  [ngClass]="{save: username.enabled}" [disabled]="email.enabled || password.enabled"
          >
            {{nameInput.disabled ? 'Bearbeiten' : 'Speichern'}}
          </button>
        </div>
        <div class="fia-user-detail email">
          <mat-form-field class="fia-input email" appearance="legacy">
            <mat-label>E-Mail</mat-label>
            <input matInput type="text" [formControl]="email" #emailInput="matInput" (change)="email.setValue(emailInput.value)" />
          </mat-form-field>
          <button class="fia-start-change-btn" (click)="toggleChangeEmail($event)"
                  [ngClass]="{save: email.enabled}" [disabled]="username.enabled || password.enabled"
          >
            {{emailInput.disabled ? 'Bearbeiten' : 'Speichern'}}
          </button>
        </div>
        <div class="fia-user-detail password">
          <mat-form-field class="fia-input password mat-form-field-should-float" appearance="legacy">
            <mat-label>Passwort</mat-label>
            <input matInput type="password" [formControl]="password" #passwordInput="matInput" (change)="password.setValue(passwordInput.value)" />
          </mat-form-field>
          <button class="fia-start-change-btn" (click)="toggleChangePassword($event)"
                  [ngClass]="{save: password.enabled}" [disabled]="username.enabled || email.enabled"
          >
            {{passwordInput.disabled ? 'Bearbeiten' : 'Speichern'}}
          </button>
        </div>
        <div class="fia-user-detail role">
          <mat-form-field class="fia-input role" appearance="legacy">
            <mat-label>Gruppe</mat-label>
            <input matInput type="text" [formControl]="role"/>
          </mat-form-field>
        </div>
        <div class="fia-user-detail progress">
          <mat-form-field class="fia-input progress" appearance="legacy">
            <mat-label>Fortschritt</mat-label>
            <input matInput type="text" [formControl]="progress"/>
          </mat-form-field>
        </div>
        <div class="fia-user-detail theme">
          <mat-form-field class="fia-input theme" appearance="legacy">
            <mat-label>Standard-Theme</mat-label>
            <input matInput type="text" [formControl]="theme"/>
          </mat-form-field>
        </div>
        <button class="fia-text-button fia-submit-edit-user-btn" type="submit" *ngIf="formGroup.touched">
          <span>Änderungen übernehmen</span>
        </button>
      </form>

      <hr/>

      <div class="fia-edit-wrapper">
        <button class="fia-text-button fia-edit-user-btn" (click)="resetProgress()">
          <span>Fortschritt zurücksetzen</span>
        </button>
        <button class="fia-text-button fia-edit-user-btn" (click)="markAllPostsAsRead()">
          <span>Alle als gelesen markieren</span>
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</div>
