<div class="fe-page login-page">
  <mat-card class="fe-card">
    <p class="fe-card-title">Schülerbereich</p>
    <mat-card-content class="fe-view-wrapper">
      <form class="fe-login-column" [formGroup]="formGroup" (ngSubmit)="login($event)" (change)="onFormChange($event)">
        <div class="fe-input-fields">
          <mat-form-field class="fe-input fe-name-input">
            <mat-label>Benutzername</mat-label>
            <input matInput type="text" autocomplete="off" [formControl]="username" (keypress)="usernameFieldKeyPress($event)"/>
            <mat-error *ngIf="username.hasError('username') && !username.hasError('required')">
              Benutzername ungültig
            </mat-error>
            <mat-error *ngIf="username.hasError('required')">
              Benutzername erforderlich
            </mat-error>
          </mat-form-field>

          <mat-form-field class="fe-input fe-password-input">
            <mat-label>Passwort</mat-label>
            <input matInput type="password" [formControl]="password" #passwordInput/>
            <mat-error *ngIf="password.hasError('invalidPassword') && !password.hasError('required')">
              Passwort falsch
            </mat-error>
            <mat-error *ngIf="password.hasError('password') && !password.hasError('required')">
              Passwort ungültig
            </mat-error>
            <mat-error *ngIf="password.hasError('minlength')">
              Passwort zu kurz (min. 4 Zeichen)
            </mat-error>
            <mat-error *ngIf="password.hasError('required')">
              Passwort erforderlich
            </mat-error>
          </mat-form-field>
        </div>
        <div class="fe-buttons-wrapper">
          <button class="fe-text-button" type="submit">
            <span *ngIf="!loading">Anmelden</span>
            <mat-spinner class="fe-loading-spinner" *ngIf="loading"></mat-spinner>
          </button>
          <button class="fe-text-button" disabled>
            <span>Passwort vergessen?</span>
          </button>
        </div>
      </form>
      <hr class="fe-divider-line"/>
      <div class="fe-register-column">
        <p class="fe-no-account-hint">Noch nicht registriert?</p>
        <a class="fe-text-button" routerLink="/register">
          <span>Account erstellen</span>
        </a>
      </div>
    </mat-card-content>
  </mat-card>
</div>
