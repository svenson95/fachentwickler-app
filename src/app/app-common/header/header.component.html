<mat-toolbar class="fia-header-toolbar">
  <button class="fia-logo-wrapper"
          (click)="closeSidenav()"
          [routerLink]="isMobile.matches ? (authService.isAuthenticated ? '/dashboard' : '/login') : '/'"
          [ngClass]="{'active-route':
            router.url === '/' ||
            router.url === '/login' ||
            isMobile.matches && router.url === '/dashboard'
          }"
  >
    <app-icon></app-icon>
  </button>
  <div class="fia-header-content">
    <div class="fia-page-title" (click)="isMobile.matches ? goToSubject() : goToSubject()">
      <span class="bracket">[</span>
      <p class="title" [innerHTML]="headerService.pageTitle"></p>
      <span class="bracket">]</span>
    </div>
    <div class="fia-header-elements-wrapper">
      <div class="fia-searchbar-wrapper" *ngIf="!isMobile.matches">
        <mat-form-field class="fia-search-bar" appearance="fill">
          <mat-icon matSuffix (click)="openSearchView()" *ngIf="!searchPostService.isSearching">search</mat-icon>
          <mat-spinner matSuffix class="fia-loading-spinner" *ngIf="searchPostService.isSearching"></mat-spinner>
          <input matInput type="text" autocomplete="off" [(ngModel)]="searchPostService.searchValue" placeholder="Suchbegriff" #searchInput>
        </mat-form-field>
      </div>
      <div class="fia-button-container">
        <button class="fia-sidenav-hamburger-btn" mat-icon-button (click)="sidenav.toggle()" *ngIf="isMobile.matches">
          <mat-icon>menu</mat-icon>
        </button>
        <button class="fia-dashboard-login-btn fia-text-button"
           [routerLink]="authService.isAuthenticated ? '/dashboard' : '/login'"
           [ngClass]="{'active-route': router.url.startsWith('/dashboard') || router.url.startsWith('/login')}"
        >
          <span>{{authService.isAuthenticated ? 'Dashboard' : 'Sch√ºlerbereich'}}</span>
        </button>
        <button class="fia-menu-btn" mat-icon-button [matMenuTriggerFor]="menu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu class="fia-more-menu" #menu="matMenu">
          <a class="fia-menu-button" mat-menu-item routerLink="dashboard" *ngIf="authService.isAuthenticated && isMobile.matches"
             [disabled]="router.url.startsWith('/dashboard')"
          >
            <mat-icon>dashboard</mat-icon>
            <span class="label">Dashboard</span>
          </a>
          <a class="fia-menu-button" mat-menu-item routerLink="mein-profil" *ngIf="authService.isAuthenticated"
             [disabled]="router.url.startsWith('/mein-profil')"
          >
            <mat-icon>account_circle</mat-icon>
            <span class="label">Mein Profil</span>
          </a>
          <a class="fia-menu-button" mat-menu-item routerLink="login" *ngIf="!authService.isAuthenticated"
             [disabled]="router.url.startsWith('/login')"
          >
            <mat-icon>login</mat-icon>
            <span class="label">Einloggen</span>
          </a>
          <a class="fia-menu-button" mat-menu-item routerLink="feedback"
             [disabled]="router.url.startsWith('/feedback')"
          >
            <mat-icon>feedback</mat-icon>
            <span class="label">Feedback</span>
          </a>
          <a class="fia-menu-button" mat-menu-item routerLink="about"
             [disabled]="router.url.startsWith('/about')"
          >
            <mat-icon>help</mat-icon>
            <span class="label">About</span>
          </a>
          <button class="fia-menu-button" mat-menu-item (click)="openImageManager()" *ngIf="!isMobile.matches && authService.user?.role === UserRole.ADMIN">
            <!--            *ngIf="authService.user.role === UserRole.ADMIN"-->
            <mat-icon>perm_media</mat-icon>
            <span class="label">Image-Manager</span>
          </button>
          <a class="fia-menu-button" mat-menu-item (click)="themeService.toggleTheme()">
            <mat-icon>invert_colors</mat-icon>
            <span class="label">{{themeService.isDarkTheme() ? 'Light': 'Dark'}} Theme aktivieren</span>
          </a>
          <button class="fia-menu-button" mat-menu-item (click)="openLogoutDialog()" *ngIf="authService.isAuthenticated">
            <mat-icon>logout</mat-icon>
            <span class="label">Ausloggen</span>
          </button>
        </mat-menu>
      </div>
    </div>
  </div>
</mat-toolbar>
<mat-progress-bar class="fia-header-progress-bar" value="100" [mode]="isLoading ? 'indeterminate' : 'determinate'"></mat-progress-bar>
